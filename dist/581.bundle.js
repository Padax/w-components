(self.webpackChunk_padax_w_components_project=self.webpackChunk_padax_w_components_project||[]).push([[581],{1835:(t,e,s)=>{s.d(e,{zu:()=>i,SO:()=>r.Z,ZP:()=>c,OE:()=>h});var i={};s.r(i),s.d(i,{parseBoolAttr:()=>o,parseIntAttr:()=>a,parseStringAttr:()=>n});var r=s(5359);function a(t,e,s,i){return t=parseInt(t),isNaN(t)||!isNaN(s)&&t<s||!isNaN(i)&&t>i?e:t}function o(t,e){return"true"===t||""===t||"false"!==t&&!!e}function n(t,e,s){return"string"!=typeof t?e:t.match(s)?t:e}class u extends HTMLElement{static getObservedAttributes(t){const e=Object.keys(t).filter((e=>!1!==t[e].observed)).map((e=>t[e].name));return Array.isArray(e)?e:[]}constructor(){super(),this.createGettersAndSetters(),this.attachShadow({mode:"open"}),this.setStylesheet(this.stylesheet),this.init(),this.key=(new Date).getTime()+Math.random()}attributeChangedCallback(t,e,s){e!==s&&this.key&&this.hasDefinedAttribute(t)&&this.update({name:t,oldValue:e,newValue:s})}createGettersAndSetters(){Array.isArray(this.constructor.observedAttributes)&&this.constructor.observedAttributes.forEach((t=>{Object.defineProperty(this,t,{get:()=>this.parseAttributeValueByName(t,this.getAttribute(t)),set:e=>{this.setAttribute(t,this.parseAttributeValueByName(t,`${e}`))}})}))}equals(t){return this.key===t.key}getAttributeParserByName(t){if("string"==typeof t)return"function"!=typeof this.constructor.attributes[t].parser?e=>"string"==typeof e?e:this.constructor.attributes[t].defaultValue:this.constructor.attributes[t].parser}getDefaultAttributeValueByName(t){if("string"==typeof t)return this.constructor.attributes[t].defaultValue}hasDefinedAttribute(t){return"string"==typeof t&&"object"==typeof this.constructor.attributes[t]}parseAttributeValueByName(t,e){return this.getAttributeParserByName(t)(e,this.constructor.attributes[t])}setStylesheet(t,e){if(e){e=`w-stylesheet-${e}`;const s=this.shadowRoot.querySelector(`#${e}`);s?r.Z.modify(s,{props:{textContent:t}}):r.Z.create("style",{props:{textContent:t,id:e}},this.shadowRoot)}else r.Z.create("style",{props:{textContent:t}},this.shadowRoot)}update(){}}function h(t){let e="w";return window.wconfig&&"string"==typeof window.wconfig.prefix&&(e=window.wconfig.prefix),`${e}-${t}`}const c=u},581:(t,e,s)=>{s.r(e),s.d(e,{default:()=>a});var i=s(1835);class r extends i.ZP{static tagName="camera";static attributes={width:{name:"width",defaultValue:640,min:480,max:4096,parser:(t,e)=>i.zu.parseIntAttr(t,e.defaultValue,e.min,e.max)},height:{name:"height",defaultValue:480,min:320,max:2160,parser:(t,e)=>i.zu.parseIntAttr(t,e.defaultValue,e.min,e.max)},autoplay:{name:"autoplay",defaultValue:!0,parser:(t,e)=>i.zu.parseBoolAttr(t,e.defaultValue)}};static get observedAttributes(){return this.getObservedAttributes(this.attributes)}constructor(){super()}init(){this.root=i.SO.create("div",{},this.shadowRoot),this.video=null,this.autoplay&&this.start()}update({name:t,newValue:e}={}){const s=this.parseAttributeValueByName(t,e);switch(t){case"width":case"height":this[t]=s,null!==this.video&&(this.video[t]=s)}}start(){null===this.video?window.navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then((t=>{i.SO.modify(this.root,{props:{textContent:""}}),this.video=i.SO.create("video",{props:{width:this.width,height:this.height}},this.root),this.video.srcObject=t,this.video.play()})).catch((t=>{i.SO.modify(this.root,{props:{textContent:t}})})):this.video.play()}stop(){null!==this.video&&(this.video.srcObject.getTracks().forEach((function(t){"live"===t.readyState&&t.stop()})),this.video.srcObject=null,this.video.remove(),this.video=null)}pause(){null!==this.video&&this.video.pause()}takePicture(t={}){if(null===this.video)return;const e=i.SO.create("canvas",{props:{width:this.video.width,height:this.video.height}}).getContext("2d");if(e.drawImage(this.video,0,0),!t.download)return new Promise(((t,s)=>{try{e.canvas.toBlob((e=>{t(e)}),"image/jpeg")}catch(t){s(t)}}));e.canvas.toBlob((t=>{const e=URL.createObjectURL(t);i.SO.create("a",{props:{download:`picture-${Date.now()}.jpg`,href:e}}).click()}),"image/jpeg")}}r.prototype.stylesheet="";const a=r}}]);